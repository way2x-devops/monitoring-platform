┌─────────────────────────────────────────────────────────────────┐
│                    Локальная машина                             │
│                                                                 │
│  ┌─────────────────┐    ┌─────────────────────────────────────┐ │
│  │   Frontend      │    │         Docker Network              │ │
│  │   (React)       │    │                                     │ │
│  │                 │    │  ┌─────────────┐  ┌─────────────┐   │ │
│  │ - Дашборд       │    │  │   Main API  │  │  Monitoring │   │ │
│  │ - Графики       │    │  │  (FastAPI)  │  │  Collector  │   │ │
│  │ - Алёрты        │    │  │             │  │  (Python)   │   │ │
│  └────────┬────────┘    │  └───────┬─────┘  └───────┬─────┘   │ │
│           │              │          │                │         │ │
│  ┌────────▼────────┐     │  ┌───────▼─────┐  ┌──────▼─────┐   │ │
│  │  Nginx Proxy    │     │  │ PostgreSQL │  │   Redis    │   │ │
│  │                 │     │  │             │  │            │   │ │
│  │ - SSL           │     │  │ - Метрики   │  │ - Кэш      │   │ │
│  │ - Статика       │     │  │ - Пользоват.│  │ - Очереди  │   │ │
│  │ - API routing   │     │  │ - Конфиги   │  │ - Сессии   │   │ │
│  └────────┬────────┘     │  └─────────────┘  └────────────┘   │ │
│           │              │                                     │ │
│  ┌────────▼────────┐     │  ┌─────────────┐  ┌─────────────┐   │ │
│  │  Prometheus     │     │  │   Worker    │  │   Scheduler │   │ │
│  │                 │     │  │  (Python)   │  │  (Python)   │   │ │
│  │ - Сбор метрик   │     │  │             │  │             │   │ │
│  │ - Хранение      │     │  │ - Фоновые   │  │ - Cron jobs │   │ │
│  │ - Query API     │     │  │   задачи    │  │ - Таймеры   │   │ │
│  └─────────────────┘     │  └─────────────┘  └─────────────┘   │ │
│                          └─────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘



stack


    backend


Python 3.11              - Базовая версия (стабильная + производительная)
FastAPI 0.104+           - Modern async framework
Uvicorn 0.24+            - ASGI сервер
SQLAlchemy 2.0+          - ORM для работы с БД
Psycopg2 2.9+            - PostgreSQL драйвер
Redis 5.0+               - Redis клиент для Python
Docker SDK 7.0+          - Для работы с Docker API
Psutil 5.9+              - Системные метрики
APScheduler 3.10+        - Планировщик задач
JWT 1.7+                 - Аутентификация


    frontend

React 18.2+              - Библиотека для UI
Node.js 18+              - Среда выполнения
Chart.js 4.4+            - Графики и диаграммы
Axios 1.5+               - HTTP клиент для API
React Router 6.16+       - Навигация
Tailwind CSS 3.3+        - CSS фреймворк (опционально)


    db
    
PostgreSQL 15            - Основная реляционная БД
Redis 7.2                - Кэш, очереди, сессии


    structure

Docker 24+               - Контейнеризация
Docker Compose 2.20+     - Оркестрация
Nginx 1.24+              - Reverse proxy + SSL
Prometheus 2.47+         - Сбор метрик (опционально)
Grafana 10.1+            - Визуализация (опционально)


    tools

Git 2.40+                - Контроль версий
Python Decouple 3.8+     - Управление конфигурацией
Pytest 7.4+              - Тестирование (опционально)
Black 23.9+              - Форматирование кода
Flake8 6.1+              - Линтинг



logic of docker logs

docker-collector  ->  redis  <-   backend    api
 (writing data)       (cash)      (reading data)